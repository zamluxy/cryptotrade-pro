<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoTrade Pro - Platform Trading Crypto</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0e1a;
            color: #fff;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #1a1f3a 0%, #0f1419 100%);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #2a3f5f;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(45deg, #00d4ff, #0099ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            cursor: pointer;
        }

        .balance-info {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .balance-item {
            text-align: center;
        }

        .balance-label {
            font-size: 12px;
            color: #8892a0;
        }

        .balance-amount {
            font-size: 18px;
            font-weight: bold;
            color: #00d4ff;
        }

        /* Main Container */
        .main-container {
            display: flex;
            min-height: calc(100vh - 70px);
            padding-bottom: 60px;
        }

        /* Chart Section */
        .chart-section {
            flex: 1;
            background: #0f1419;
            border-right: 1px solid #2a3f5f;
            position: relative;
        }

        .chart-header {
            padding: 15px;
            background: #1a1f3a;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .asset-selector {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .asset-name {
            font-size: 20px;
            font-weight: bold;
        }

        .asset-change {
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: bold;
        }

        .positive {
            background: #00c851;
            color: white;
        }

        .negative {
            background: #ff4444;
            color: white;
        }

        #tradingChart {
            width: 100%;
            height: calc(100% - 60px);
            background: #0a0e1a;
        }

        /* Trading Panel */
        .trading-panel {
            width: 350px;
            background: #1a1f3a;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .trade-type-selector {
            display: flex;
            background: #0f1419;
            border-radius: 10px;
            padding: 5px;
        }

        .trade-type-btn {
            flex: 1;
            padding: 12px;
            border: none;
            background: transparent;
            color: #8892a0;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
            font-weight: bold;
        }

        .trade-type-btn.active {
            background: #2a3f5f;
            color: #00d4ff;
        }

        .trade-amount {
            background: #0f1419;
            padding: 20px;
            border-radius: 10px;
        }

        .amount-label {
            font-size: 14px;
            color: #8892a0;
            margin-bottom: 10px;
        }

        .amount-input-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .amount-input {
            flex: 1;
            background: #1a1f3a;
            border: 2px solid #2a3f5f;
            color: #fff;
            padding: 12px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
        }

        .amount-presets {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .amount-preset {
            padding: 8px 12px;
            background: #2a3f5f;
            border: none;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .amount-preset:hover {
            background: #3a4f6f;
        }

        .trade-duration {
            background: #0f1419;
            padding: 20px;
            border-radius: 10px;
        }

        .duration-presets {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .duration-preset {
            padding: 10px;
            background: #1a1f3a;
            border: 2px solid #2a3f5f;
            color: #fff;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }

        .duration-preset.active {
            border-color: #00d4ff;
            background: #2a3f5f;
        }

        .trade-buttons {
            display: flex;
            gap: 10px;
        }

        .trade-btn {
            flex: 1;
            padding: 20px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .trade-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .btn-up {
            background: linear-gradient(135deg, #00c851, #00ff00);
            color: white;
        }

        .btn-down {
            background: linear-gradient(135deg, #ff4444, #ff0000);
            color: white;
        }

        .trade-btn .profit {
            font-size: 12px;
            opacity: 0.8;
        }

        /* Active Trades */
        .active-trades {
            background: #0f1419;
            padding: 20px;
            border-radius: 10px;
            max-height: 300px;
            overflow-y: auto;
        }

        .active-trades h3 {
            margin-bottom: 15px;
            color: #00d4ff;
        }

        .trade-item {
            background: #1a1f3a;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .trade-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .trade-asset {
            font-weight: bold;
        }

        .trade-details {
            font-size: 12px;
            color: #8892a0;
        }

        .trade-profit {
            font-weight: bold;
            font-size: 16px;
        }

        .profit-positive {
            color: #00c851;
        }

        .profit-negative {
            color: #ff4444;
        }

        /* Section containers */
        .section {
            display: none;
            padding: 20px;
            width: 100%;
        }

        .section.active {
            display: block;
        }

        .history-section, .wallet-section, .profile-section {
            background: #1a1f3a;
            border-radius: 10px;
            padding: 20px;
            margin: 20px;
        }

        .history-table, .wallet-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .history-table th, .history-table td,
        .wallet-table th, .wallet-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #2a3f5f;
        }

        .history-table th, .wallet-table th {
            color: #00d4ff;
        }

        .wallet-card {
            background: linear-gradient(135deg, #1a1f3a 0%, #0f1419 100%);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #2a3f5f;
        }

        .wallet-address {
            background: #0f1419;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
            word-break: break-all;
        }

        .profile-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .form-label {
            color: #8892a0;
            font-size: 14px;
        }

        .form-input {
            background: #0f1419;
            border: 2px solid #2a3f5f;
            color: #fff;
            padding: 12px;
            border-radius: 8px;
            font-size: 16px;
        }

        .form-btn {
            background: #00d4ff;
            color: #fff;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .form-btn:hover {
            background: #00a8cc;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #1a1f3a;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            border-top: 2px solid #2a3f5f;
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: #8892a0;
        }

        .nav-item.active {
            color: #00d4ff;
        }

        .nav-icon {
            font-size: 24px;
        }

        .nav-label {
            font-size: 12px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: #1a1f3a;
            padding: 30px;
            border-radius: 15px;
            max-width: 400px;
            width: 90%;
            text-align: center;
        }

        .modal-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .modal-message {
            color: #8892a0;
            margin-bottom: 20px;
        }

        .modal-btn {
            background: #00d4ff;
            color: #fff;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-btn:hover {
            background: #00a8cc;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
            
            .trading-panel {
                width: 100%;
                order: -1;
            }
            
            .chart-section {
                height: 400px;
            }
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0f1419;
        }

        ::-webkit-scrollbar-thumb {
            background: #2a3f5f;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #3a4f6f;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo" onclick="showSection('trade')">CryptoTrade Pro</div>
        <div class="balance-info">
            <div class="balance-item">
                <div class="balance-label">Saldo</div>
                <div class="balance-amount" id="balance">$10,000.00</div>
            </div>
            <div class="balance-item">
                <div class="balance-label">Profit Hari Ini</div>
                <div class="balance-amount" id="todayProfit" style="color: #00c851;">+$250.50</div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Trade Section (Default) -->
        <div class="section active" id="tradeSection">
            <!-- Chart Section -->
            <div class="chart-section">
                <div class="chart-header">
                    <div class="asset-selector">
                        <span class="asset-name">BTC/USDT</span>
                        <span class="asset-change positive" id="assetChange">+2.45%</span>
                    </div>
                    <div class="chart-controls">
                        <button class="amount-preset" onclick="changeTimeframe('1m')">1M</button>
                        <button class="amount-preset" onclick="changeTimeframe('5m')">5M</button>
                        <button class="amount-preset" onclick="changeTimeframe('1h')">1H</button>
                        <button class="amount-preset" onclick="changeTimeframe('1d')">1D</button>
                    </div>
                </div>
                <canvas id="tradingChart"></canvas>
            </div>

            <!-- Trading Panel -->
            <div class="trading-panel">
                <!-- Trade Type Selector -->
                <div class="trade-type-selector">
                    <button class="trade-type-btn active" onclick="setTradeType('binary')">Binary</button>
                    <button class="trade-type-btn" onclick="setTradeType('forex')">Forex</button>
                </div>

                <!-- Amount Input -->
                <div class="trade-amount">
                    <div class="amount-label">Jumlah Investasi</div>
                    <div class="amount-input-container">
                        <span>$</span>
                        <input type="number" class="amount-input" id="investAmount" value="100" min="1" max="10000">
                    </div>
                    <div class="amount-presets">
                        <button class="amount-preset" onclick="setAmount(10)">$10</button>
                        <button class="amount-preset" onclick="setAmount(50)">$50</button>
                        <button class="amount-preset" onclick="setAmount(100)">$100</button>
                        <button class="amount-preset" onclick="setAmount(500)">$500</button>
                        <button class="amount-preset" onclick="setAmount(1000)">$1000</button>
                    </div>
                </div>

                <!-- Duration -->
                <div class="trade-duration">
                    <div class="amount-label">Durasi Trading</div>
                    <div class="duration-presets">
                        <button class="duration-preset active" onclick="setDuration(60)">1M</button>
                        <button class="duration-preset" onclick="setDuration(300)">5M</button>
                        <button class="duration-preset" onclick="setDuration(900)">15M</button>
                        <button class="duration-preset" onclick="setDuration(1800)">30M</button>
                        <button class="duration-preset" onclick="setDuration(3600)">1H</button>
                        <button class="duration-preset" onclick="setDuration(86400)">1D</button>
                    </div>
                </div>

                <!-- Trade Buttons -->
                <div class="trade-buttons">
                    <button class="trade-btn btn-up" onclick="placeTrade('up')">
                        <span>NAIK</span>
                        <span class="profit">Profit 85%</span>
                    </button>
                    <button class="trade-btn btn-down" onclick="placeTrade('down')">
                        <span>TURUN</span>
                        <span class="profit">Profit 85%</span>
                    </button>
                </div>

                <!-- Active Trades -->
                <div class="active-trades">
                    <h3>Trading Aktif (<span id="activeCount">0</span>)</h3>
                    <div id="activeTradesList"></div>
                </div>
            </div>
        </div>

        <!-- History Section -->
        <div class="section" id="historySection">
            <div class="history-section">
                <h2>Riwayat Trading</h2>
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Pasangan</th>
                            <th>Arah</th>
                            <th>Jumlah</th>
                            <th>Entry</th>
                            <th>Exit</th>
                            <th>Profit</th>
                            <th>Waktu</th>
                        </tr>
                    </thead>
                    <tbody id="historyTableBody">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Wallet Section -->
        <div class="section" id="walletSection">
            <div class="wallet-section">
                <h2>Dompet Saya</h2>
                
                <div class="wallet-card">
                    <h3>Saldo Utama</h3>
                    <div class="balance-amount" style="font-size: 24px;" id="walletBalance">$10,000.00</div>
                    
                    <div class="form-group">
                        <label class="form-label">Alamat Dompet</label>
                        <div class="wallet-address" id="walletAddress">0x1a2b3c4d5e6f7g8h9i0j1k2l3m4n5o6p7q8r9s0t</div>
                    </div>
                </div>
                
                <h3>Aset Saya</h3>
                <table class="wallet-table">
                    <thead>
                        <tr>
                            <th>Aset</th>
                            <th>Jumlah</th>
                            <th>Nilai (USD)</th>
                            <th>Perubahan (24j)</th>
                        </tr>
                    </thead>
                    <tbody id="walletTableBody">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Profile Section -->
        <div class="section" id="profileSection">
            <div class="profile-section">
                <h2>Profil Saya</h2>
                
                <form class="profile-form" id="profileForm">
                    <div class="form-group">
                        <label class="form-label">Nama Lengkap</label>
                        <input type="text" class="form-input" id="profileName" value="John Doe">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="profileEmail" value="john.doe@example.com">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Telepon</label>
                        <input type="tel" class="form-input" id="profilePhone" value="+628123456789">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Verifikasi Akun</label>
                        <div style="color: #00c851; margin-top: 5px;">âœ“ Terverifikasi</div>
                    </div>
                    
                    <button type="button" class="form-btn" onclick="updateProfile()">Simpan Perubahan</button>
                </form>
                
                <div style="margin-top: 30px;">
                    <h3>Statistik Trading</h3>
                    <table class="history-table">
                        <tr>
                            <td>Total Trading</td>
                            <td id="totalTrades">24</td>
                        </tr>
                        <tr>
                            <td>Trading Berhasil</td>
                            <td id="successTrades">20 (83.3%)</td>
                        </tr>
                        <tr>
                            <td>Total Profit</td>
                            <td style="color: #00c851;" id="totalProfit">+$1,245.50</td>
                        </tr>
                        <tr>
                            <td>Bergabung Sejak</td>
                            <td>15 Jan 2023</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item active" onclick="showSection('trade')">
            <span class="nav-icon">ðŸ“ˆ</span>
            <span class="nav-label">Trade</span>
        </div>
        <div class="nav-item" onclick="showSection('history')">
            <span class="nav-icon">ðŸ“Š</span>
            <span class="nav-label">History</span>
        </div>
        <div class="nav-item" onclick="showSection('wallet')">
            <span class="nav-icon">ðŸ’°</span>
            <span class="nav-label">Wallet</span>
        </div>
        <div class="nav-item" onclick="showSection('profile')">
            <span class="nav-icon">ðŸ‘¤</span>
            <span class="nav-label">Profile</span>
        </div>
    </nav>

    <!-- Modal -->
    <div class="modal" id="tradeModal">
        <div class="modal-content">
            <div class="modal-icon" id="modalIcon">âœ…</div>
            <div class="modal-title" id="modalTitle">Trading Berhasil!</div>
            <div class="modal-message" id="modalMessage">Trading Anda telah ditempatkan</div>
            <button class="modal-btn" onclick="closeModal()">OK</button>
        </div>
    </div>

    <script>
        // Global Variables
        let chart = null;
        let chartData = [];
        let currentPrice = 45000;
        let balance = 10000;
        let activeTrades = [];
        let tradeHistory = [];
        let currentDuration = 60;
        let currentAmount = 100;
        let priceHistory = [];
        let currentTimeframe = '5m';
        let tradeType = 'binary';

        // Initialize Chart
        function initChart() {
            const canvas = document.getElementById('tradingChart');
            const ctx = canvas.getContext('2d');
            
            // Set canvas size
            function resizeCanvas() {
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            // Generate initial data
            generatePriceData();
            
            // Draw chart
            drawChart(ctx, canvas);
            
            // Update chart every second
            setInterval(() => {
                updatePrice();
                drawChart(ctx, canvas);
            }, 1000);
        }

        // Generate realistic price data
        function generatePriceData() {
            const now = Date.now();
            const basePrice = 45000;
            
            for (let i = 100; i >= 0; i--) {
                const time = now - (i * 60000);
                const randomChange = (Math.random() - 0.5) * 200;
                const trendChange = Math.sin(i / 20) * 100;
                const price = basePrice + randomChange + trendChange;
                
                priceHistory.push({
                    time: time,
                    price: price
                });
            }
            
            currentPrice = priceHistory[priceHistory.length - 1].price;
        }

        // Update price
        function updatePrice() {
            const lastPrice = priceHistory[priceHistory.length - 1].price;
            const change = (Math.random() - 0.5) * 50;
            const newPrice = lastPrice + change;
            
            priceHistory.push({
                time: Date.now(),
                price: newPrice
            });
            
            // Keep only last 100 points
            if (priceHistory.length > 100) {
                priceHistory.shift();
            }
            
            currentPrice = newPrice;
            
            // Update UI
            document.querySelector('.asset-name').textContent = `BTC/USDT ${newPrice.toFixed(2)}`;
            
            const changePercent = ((newPrice - 45000) / 45000 * 100).toFixed(2);
            const changeElement = document.getElementById('assetChange');
            changeElement.textContent = `${changePercent > 0 ? '+' : ''}${changePercent}%`;
            changeElement.className = `asset-change ${changePercent >= 0 ? 'positive' : 'negative'}`;
        }

        // Draw chart
        function drawChart(ctx, canvas) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            if (priceHistory.length < 2) return;
            
            const padding = 40;
            const chartWidth = canvas.width - padding * 2;
            const chartHeight = canvas.height - padding * 2;
            
            // Find min and max prices
            const prices = priceHistory.map(p => p.price);
            const minPrice = Math.min(...prices) * 0.995;
            const maxPrice = Math.max(...prices) * 1.005;
            const priceRange = maxPrice - minPrice;
            
            // Draw grid
            ctx.strokeStyle = '#2a3f5f';
            ctx.lineWidth = 1;
            
            // Horizontal lines
            for (let i = 0; i <= 5; i++) {
                const y = padding + (chartHeight / 5) * i;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(canvas.width - padding, y);
                ctx.stroke();
                
                // Price labels
                const price = maxPrice - (priceRange / 5) * i;
                ctx.fillStyle = '#8892a0';
                ctx.font = '12px sans-serif';
                ctx.textAlign = 'right';
                ctx.fillText(price.toFixed(2), padding - 10, y + 4);
            }
            
            // Draw price line
            ctx.strokeStyle = '#00d4ff';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            priceHistory.forEach((point, index) => {
                const x = padding + (chartWidth / (priceHistory.length - 1)) * index;
                const y = padding + chartHeight - ((point.price - minPrice) / priceRange) * chartHeight;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            
            ctx.stroke();
            
            // Draw gradient fill
            const gradient = ctx.createLinearGradient(0, padding, 0, canvas.height - padding);
            gradient.addColorStop(0, 'rgba(0, 212, 255, 0.3)');
            gradient.addColorStop(1, 'rgba(0, 212, 255, 0)');
            
            ctx.fillStyle = gradient;
            ctx.lineTo(canvas.width - padding, canvas.height - padding);
            ctx.lineTo(padding, canvas.height - padding);
            ctx.closePath();
            ctx.fill();
            
            // Draw current price line
            const currentY = padding + chartHeight - ((currentPrice - minPrice) / priceRange) * chartHeight;
            ctx.strokeStyle = '#ffaa00';
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(padding, currentY);
            ctx.lineTo(canvas.width - padding, currentY);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Current price label
            ctx.fillStyle = '#ffaa00';
            ctx.font = 'bold 14px sans-serif';
            ctx.textAlign = 'left';
            ctx.fillText(`$${currentPrice.toFixed(2)}`, padding + 10, currentY - 5);
        }

        // Trading Functions
        function setAmount(amount) {
            currentAmount = amount;
            document.getElementById('investAmount').value = amount;
        }

        function setDuration(seconds) {
            currentDuration = seconds;
            document.querySelectorAll('.duration-preset').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function setTradeType(type) {
            tradeType = type;
            document.querySelectorAll('.trade-type-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (type === 'forex') {
                showModal('â„¹ï¸', 'Mode Forex', 'Anda sekarang dalam mode trading Forex');
            }
        }

        function placeTrade(direction) {
            if (currentAmount > balance) {
                showModal('âŒ', 'Saldo Tidak Cukup!', 'Silakan kurangi jumlah investasi Anda');
                return;
            }

            const trade = {
                id: Date.now(),
                asset: 'BTC/USDT',
                direction: direction,
                amount: currentAmount,
                entryPrice: currentPrice,
                duration: currentDuration,
                startTime: Date.now(),
                endTime: Date.now() + (currentDuration * 1000),
                status: 'active',
                type: tradeType
            };

            activeTrades.push(trade);
            balance -= currentAmount;
            updateBalance();
            updateActiveTrades();
            
            showModal('âœ…', 'Trading Ditempatkan!', 
                `${direction === 'up' ? 'Naik' : 'Turun'} $${currentAmount} pada BTC/USDT`);
            
            // Simulate trade result after duration
            setTimeout(() => {
                completeTrade(trade.id);
            }, currentDuration * 1000);
        }

        function completeTrade(tradeId) {
            const trade = activeTrades.find(t => t.id === tradeId);
            if (!trade) return;

            // Simulate trade result (85% win rate for demo)
            const win = Math.random() < 0.85;
            const profit = win ? trade.amount * 0.85 : -trade.amount;
            
            trade.status = 'completed';
            trade.exitPrice = currentPrice;
            trade.profit = profit;
            trade.payout = win ? trade.amount + profit : 0;
            trade.endTime = Date.now();
            
            // Move to history
            activeTrades = activeTrades.filter(t => t.id !== tradeId);
            tradeHistory.unshift(trade);
            
            // Update balance
            balance += trade.payout || 0;
            updateBalance();
            updateActiveTrades();
            
            // Update history if visible
            if (document.getElementById('historySection').classList.contains('active')) {
                updateHistoryTable();
            }
            
            // Update profile stats if visible
            if (document.getElementById('profileSection').classList.contains('active')) {
                updateProfileStats();
            }
            
            // Show result
            if (win) {
                showModal('ðŸŽ‰', 'Trading Berhasil!', 
                    `Anda mendapatkan $${profit.toFixed(2)} keuntungan`);
            } else {
                showModal('ðŸ˜ž', 'Trading Gagal', 
                    `Anda kehilangan $${trade.amount}`);
            }
        }

        function updateBalance() {
            document.getElementById('balance').textContent = `$${balance.toFixed(2)}`;
            document.getElementById('walletBalance').textContent = `$${balance.toFixed(2)}`;
            
            // Update today's profit
            const todayProfit = tradeHistory
                .filter(t => t.status === 'completed' && isToday(t.endTime))
                .reduce((sum, t) => sum + (t.profit || 0), 0);
            
            document.getElementById('todayProfit').textContent = 
                `${todayProfit >= 0 ? '+' : ''}$${todayProfit.toFixed(2)}`;
            document.getElementById('todayProfit').style.color = 
                todayProfit >= 0 ? '#00c851' : '#ff4444';
        }

        function isToday(timestamp) {
            const today = new Date();
            const date = new Date(timestamp);
            return date.getDate() === today.getDate() &&
                   date.getMonth() === today.getMonth() &&
                   date.getFullYear() === today.getFullYear();
        }

        function updateActiveTrades() {
            const container = document.getElementById('activeTradesList');
            const count = document.getElementById('activeCount');
            
            count.textContent = activeTrades.length;
            
            if (activeTrades.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: #8892a0;">Tidak ada trading aktif</div>';
                return;
            }
            
            container.innerHTML = activeTrades.map(trade => {
                const remaining = Math.max(0, trade.endTime - Date.now());
                const seconds = Math.floor(remaining / 1000);
                const minutes = Math.floor(seconds / 60);
                const secs = seconds % 60;
                
                const currentProfit = (currentPrice - trade.entryPrice) * 
                    (trade.direction === 'up' ? 1 : -1);
                const profitPercent = (currentProfit / trade.amount) * 85;
                
                return `
                    <div class="trade-item">
                        <div class="trade-info">
                            <div class="trade-asset">
                                ${trade.asset} ${trade.direction === 'up' ? 'ðŸ“ˆ' : 'ðŸ“‰'}
                                ${trade.type === 'forex' ? ' (Forex)' : ''}
                            </div>
                            <div class="trade-details">
                                $${trade.amount} â€¢ ${minutes}:${secs.toString().padStart(2, '0')}
                            </div>
                        </div>
                        <div class="trade-profit ${profitPercent >= 0 ? 'profit-positive' : 'profit-negative'}">
                            ${profitPercent >= 0 ? '+' : ''}${profitPercent.toFixed(2)}%
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateHistoryTable() {
            const tableBody = document.getElementById('historyTableBody');
            
            if (tradeHistory.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #8892a0; padding: 20px;">Tidak ada riwayat trading</td></tr>';
                return;
            }
            
            tableBody.innerHTML = tradeHistory.map(trade => {
                const date = new Date(trade.endTime);
                const formattedDate = `${date.toLocaleDateString()} ${date.toLocaleTimeString()}`;
                
                return `
                    <tr>
                        <td>${trade.asset}</td>
                        <td>${trade.direction === 'up' ? 'Naik' : 'Turun'}</td>
                        <td>$${trade.amount}</td>
                        <td>$${trade.entryPrice.toFixed(2)}</td>
                        <td>$${trade.exitPrice.toFixed(2)}</td>
                        <td class="${trade.profit >= 0 ? 'profit-positive' : 'profit-negative'}">
                            ${trade.profit >= 0 ? '+' : ''}$${Math.abs(trade.profit).toFixed(2)}
                        </td>
                        <td>${formattedDate}</td>
                    </tr>
                `;
            }).join('');
        }

        function updateWalletTable() {
            const tableBody = document.getElementById('walletTableBody');
            
            // Sample wallet data
            const walletAssets = [
                { symbol: 'BTC', amount: 0.15, value: 6750, change: 2.45 },
                { symbol: 'ETH', amount: 2.5, value: 2500, change: -1.23 },
                { symbol: 'USDT', amount: 750, value: 750, change: 0.01 },
                { symbol: 'BNB', amount: 5, value: 500, change: 0.75 }
            ];
            
            tableBody.innerHTML = walletAssets.map(asset => {
                return `
                    <tr>
                        <td>${asset.symbol}</td>
                        <td>${asset.amount}</td>
                        <td>$${asset.value.toFixed(2)}</td>
                        <td class="${asset.change >= 0 ? 'profit-positive' : 'profit-negative'}">
                            ${asset.change >= 0 ? '+' : ''}${asset.change}%
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function updateProfileStats() {
            const completedTrades = tradeHistory.filter(t => t.status === 'completed');
            const successfulTrades = completedTrades.filter(t => t.profit > 0);
            const totalProfit = completedTrades.reduce((sum, t) => sum + (t.profit || 0), 0);
            const successRate = completedTrades.length > 0 ? 
                (successfulTrades.length / completedTrades.length * 100).toFixed(1) : 0;
            
            document.getElementById('totalTrades').textContent = completedTrades.length;
            document.getElementById('successTrades').textContent = 
                `${successfulTrades.length} (${successRate}%)`;
            document.getElementById('totalProfit').textContent = 
                `${totalProfit >= 0 ? '+' : ''}$${Math.abs(totalProfit).toFixed(2)}`;
            document.getElementById('totalProfit').style.color = 
                totalProfit >= 0 ? '#00c851' : '#ff4444';
        }

        function updateProfile() {
            const name = document.getElementById('profileName').value;
            const email = document.getElementById('profileEmail').value;
            const phone = document.getElementById('profilePhone').value;
            
            showModal('âœ…', 'Profil Diperbarui!', 'Perubahan profil Anda telah disimpan');
            
            // In a real app, you would send this data to a server
            console.log('Profile updated:', { name, email, phone });
        }

        function showModal(icon, title, message) {
            document.getElementById('modalIcon').textContent = icon;
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalMessage').textContent = message;
            document.getElementById('tradeModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('tradeModal').style.display = 'none';
        }

        function showSection(section) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(sec => {
                sec.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(section + 'Section').classList.add('active');
            
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.nav-item').classList.add('active');
            
            // Load section-specific data
            if (section === 'history') {
                updateHistoryTable();
            } else if (section === 'wallet') {
                updateWalletTable();
            } else if (section === 'profile') {
                updateProfileStats();
            }
        }

        function changeTimeframe(timeframe) {
            currentTimeframe = timeframe;
            
            // In a real app, this would fetch new chart data
            showModal('ðŸ“Š', 'Timeframe Diubah', 
                `Chart berubah ke timeframe ${timeframe}`);
        }

        // Initialize
        window.onload = function() {
            initChart();
            updateActiveTrades();
            
            // Generate some sample trade history
            for (let i = 0; i < 5; i++) {
                const trade = {
                    id: Date.now() - (i * 86400000),
                    asset: 'BTC/USDT',
                    direction: Math.random() > 0.5 ? 'up' : 'down',
                    amount: 50 + Math.floor(Math.random() * 200),
                    entryPrice: 44000 + Math.floor(Math.random() * 2000),
                    exitPrice: 44200 + Math.floor(Math.random() * 2000),
                    duration: 300,
                    startTime: Date.now() - (i * 86400000) - 300000,
                    endTime: Date.now() - (i * 86400000),
                    status: 'completed',
                    profit: Math.random() > 0.3 ? 42.5 : -50,
                    type: 'binary'
                };
                tradeHistory.push(trade);
            }
            
            // Update active trades every second
            setInterval(updateActiveTrades, 1000);
        };

        // Handle amount input change
        document.getElementById('investAmount').addEventListener('input', function() {
            currentAmount = parseFloat(this.value) || 0;
        });
    </script>
</body>
                        </html>
